(function(e,t,n,i){e.fn.form=function(t,n){var a,o=e(this),r=e.extend(!0,{},e.fn.form.settings,n),s=e.extend({},e.fn.form.settings.defaults,t),l="."+r.namespace,c=("module-"+r.namespace,o.selector||"",(new Date).getTime()),u=[],d=arguments[0],f="string"==typeof d,m=[].slice.call(arguments,1);return o.each(function(){var t,n=e(this),p=e(this).find(r.selector.field),g=e(this).find(r.selector.group),h=e(this).find(r.selector.message),v=(e(this).find(r.selector.prompt),e(this).find(r.selector.submit)),y=[],b=this,x=n.data("module-"+r.namespace),w=r.namespace,C=r.selector,k=r.metadata,P=r.className,z=r.errors;t={initialize:function(){t.verbose("Initializing form validation"),r.keyboardShortcuts&&p.on("keydown"+l,t.event.field.keydown),n.on("submit"+l,t.validate.form),p.on("change"+l,t.event.field.change),v.on("click"+l,t.submit)},destroy:function(){n.off(w)},refresh:function(){p=n.find(C.field)},submit:function(){t.verbose("Submitting form",n),n.submit()},event:{field:{keydown:function(n){var a=e(this),o=n.which,r={enter:13,escape:27};return o==r.escape&&(t.verbose("Escape key pressed blurring field"),a.blur()),o==r.enter&&a.is(C.input)?(t.debug("Enter key pressed, submitting form"),v.addClass(P.down),a.one("keyup"+l,t.event.field.keyup),n.preventDefault(),!1):i},keyup:function(){t.verbose("Doing keyboard shortcut form submit"),v.removeClass(P.down),t.submit()},change:function(){var n=e(this),i=n.closest(g);i.hasClass(P.error)?(t.debug("Revalidating field",n,t.get.validation(n)),t.validate.field(t.get.validation(n))):"change"==r.on&&t.validate.field(t.get.validation(n))}}},get:{field:function(t){return p.filter("#"+t).size()>0?p.filter("#"+t):p.filter('[name="'+t+'"]').size()>0?p.filter('[name="'+t+'"]'):p.filter("[data-"+k.validate+'="'+t+'"]').size()>0?p.filter("[data-"+k.validate+'="'+t+'"]'):e("<input/>")},validation:function(n){var i;return e.each(s,function(e,a){t.get.field(a.identifier).get(0)==n.get(0)&&(i=a)}),i||!1}},add:{prompt:function(e,n){var i=t.get.field(e.identifier),a=i.closest(g),o=a.find(C.prompt),s=0!==o.size();t.verbose("Adding inline validation prompt"),a.addClass(P.error),r.inlineError&&(s||(o=r.templates.prompt(n),o.appendTo(a).hide()),o.html(n[0]),o.is(":not(:visible)")&&o.fadeIn(200))},errors:function(e){t.debug("Adding form error messages",e),h.html(r.templates.error(e))}},remove:{prompt:function(e){var n=t.get.field(e.identifier),i=n.closest(g),a=g.find(a);i.removeClass(P.error),r.inlineError&&a.hide()}},validate:{form:function(i){var a=!0;y=[],e.each(s,function(e,n){t.validate.field(n)||(a=!1)}),a?(n.removeClass(P.error),e.proxy(r.onSuccess,this)(i)):(n.addClass(P.error),r.inlineError||t.add.errors(y),e.proxy(r.onFailure,this)(y))},field:function(n){var a=t.get.field(n.identifier),o=!0,s=[];return n.rules!==i&&e.each(n.rules,function(e,i){t.validate.rule(n,i)||(t.debug("Field is invalid",n.identifier,i.type),s.push(i.prompt),o=!1)}),o?(t.remove.prompt(n,s),e.proxy(r.onValid,a)(),!0):(y=y.concat(s),t.add.prompt(n,s),e.proxy(r.onInvalid,a)(s),!1)},rule:function(a,o){var s,l,c=t.get.field(a.identifier),u=o.type,d=c.val(),f=/\[(.*?)\]/i,m=f.exec(u),p=!0;return m!==i&&null!=m?(s=m[1],l=u.replace(m[0],""),p=e.proxy(r.rules[l],n)(d,s)):p="checked"==u?c.filter(":checked").size()>0:r.rules[u](d),p}},setting:function(t,n){return n===i?r[t]:(e.isPlainObject(t)?e.extend(!0,r,t):r[t]=n,i)},internal:function(n,a){return a===i?t[n]:(e.isPlainObject(n)?e.extend(!0,t,n):t[n]=a,i)},debug:function(){r.debug&&(t.performance.log(arguments[0]),t.debug=Function.prototype.bind.call(console.info,console,r.moduleName+":"))},verbose:function(){r.verbose&&r.debug&&(t.performance.log(arguments[0]),t.verbose=Function.prototype.bind.call(console.info,console,r.moduleName+":"))},error:function(){t.error=Function.prototype.bind.call(console.log,console,r.moduleName+":")},performance:{log:function(e){var n,i,a;r.performance&&(n=(new Date).getTime(),a=c||n,i=n-a,c=n,u.push({Element:b,Name:e,"Execution Time":i}),clearTimeout(t.performance.timer),t.performance.timer=setTimeout(t.performance.display,100))},display:function(){var t=r.moduleName,n=(r.moduleName+": "+C+"("+o.size()+" elements)",0);C&&(t+="Performance ("+C+")"),(console.group!==i||console.table!==i)&&u.length>0&&(console.groupCollapsed(t),console.table?(e.each(u,function(e,t){n+=t["Execution Time"]}),console.table(u)):e.each(u,function(e,t){n+=t["Execution Time"]}),console.log("Total Execution Time:",n+"ms"),console.groupEnd(),u=[],c=!1)}},invoke:function(n,a,o){var r,s;return a=a||m,o=b||o,"string"==typeof n&&x!==i&&(n=n.split("."),r=n.length-1,e.each(n,function(n,a){return e.isPlainObject(x[a])&&n!=r?(x=x[a],!0):x[a]!==i?(s=x[a],!0):(t.error(z.method),!1)})),e.isFunction(s)?(t.verbose("Executing invoked function",s),s.apply(o,a)):s||!1}},f?(x===i&&t.initialize(),a=t.invoke(d)):(x!==i&&t.destroy(),t.initialize())}),a?a:this},e.fn.form.settings={moduleName:"Validate Form Module",debug:!0,verbose:!0,namespace:"validate",keyboardShortcuts:!0,on:"change",animateSpeed:150,inlineError:!1,onValid:function(){},onInvalid:function(){},onSuccess:function(){return!0},onFailure:function(){return!1},metadata:{validate:"validate"},selector:{message:".error.message",field:"input, textarea, select",group:".field",input:"input",prompt:".prompt",submit:".submit"},className:{error:"error",down:"down",label:"ui label prompt"},errors:{method:"The method you called is not defined."},defaults:{firstName:{identifier:"first-name",rules:[{type:"empty",prompt:"Please enter your first name"}]},lastName:{identifier:"last-name",rules:[{type:"empty",prompt:"Please enter your last name"}]},username:{identifier:"username",rules:[{type:"empty",prompt:"Please enter a username"}]},email:{identifier:"email",rules:[{type:"empty",prompt:"Please enter your email"},{type:"email",prompt:"Please enter a valid email"}]},password:{identifier:"password",rules:[{type:"empty",prompt:"Please enter a password"},{type:"length[6]",prompt:"Your password must be at least 6 characters"}]},passwordConfirm:{identifier:"password-confirm",rules:[{type:"empty",prompt:"Please confirm your password"},{identifier:"password-confirm",type:"match[password]",prompt:"Please verify password matches"}]},terms:{identifier:"terms",rules:[{type:"checked",prompt:"You must agree to the terms and conditions"}]}},templates:{error:function(t){var n='<ul class="list">';return e.each(t,function(e,t){n+="<li>"+t+"</li>"}),n+="</ul>",e(n)},prompt:function(t){return e("<div/>").addClass("ui red pointing prompt label").html(t[0])}},rules:{empty:function(e){return!(e===i||""===e)},email:function(e){var t=RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?");return t.test(e)},length:function(e,t){return e!==i?e.length>=t:!1},not:function(e,t){return e!=t},maxLength:function(e,t){return e!==i?t>=e.length:!1},match:function(t,n){var a,o=e(this);return o.find("#"+n).size()>0?a=o.find("#"+n).val():o.find("[name="+n+"]").size()>0?a=o.find("[name="+n+"]").val():o.find('[data-validate="'+n+'"]').size()>0&&(a=o.find('[data-validate="'+n+'"]').val()),a!==i?""+t==""+a:!1},url:function(e){var t=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return t.test(e)}}}})(jQuery,window,document);